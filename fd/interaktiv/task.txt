Техническое задание: «Физический стол с фигурами и полями (Tkinter)»

1. Цель проекта
Создать графическое приложение на Python (Tkinter + Canvas), в котором пользователь может перетаскивать фигуры мышью (Drag&Drop), задавать импульс “броском”, а также наблюдать простую физическую симуляцию: движение по инерции, столкновения, гравитацию, порыв ветра, магнитное поле и влияние липкой зоны.

2. Функциональные требования
    2.1. Основная функциональность
        - Отображение рабочего поля на Canvas
        - Добавление объектов на сцену через панель кнопок
        - Перетаскивание объектов мышью (захват, перемещение, отпускание)
        - Придание объекту импульса при отпускании (по скорости движения мыши)
        - Цикл обновления симуляции в реальном времени (after)
        - Проверка столкновений и обработка границ рабочего поля
        - Кнопка сброса сцены

    2.2. Динамические объекты (перетаскиваемые)
        - Круг (Ball)
            - Параметры: радиус, масса, скорость (vx, vy), упругость, затухание
            - Столкновения: круг–круг по расстоянию центров
            - Столкновения с другими фигурами: упрощенно через bbox
        - Прямоугольник (Box)
            - Параметры: ширина/высота, масса, скорость, упругость, затухание
            - Столкновения: упрощенно через bbox
        - Треугольник (Polygon-3)
            - Параметры: вершины (3 точки), масса, скорость, упругость, затухание
            - Столкновения: упрощенно через bbox
        - Пятиугольник (Polygon-5)
            - Параметры: вершины (5 точек), масса, скорость, упругость, затухание
            - Столкновения: упрощенно через bbox

    2.3. Специальные объекты и эффекты
        - Магнит (Magnet)
            - Отображение: фигура магнита + круг радиуса действия (кольцо)
            - Магнит и его поле должны перемещаться вместе (в drag и при инерционном движении)
            - Параметры: радиус действия (radius), сила (strength)
            - Режимы: притяжение / отталкивание (переключатель)
            - Влияние: добавляет ускорение объектам в радиусе действия; сила зависит от расстояния и ограничена сверху
        - Липкая зона (GlueZone)
            - Отображение: прямоугольная полупрозрачная область
            - Параметры: размеры (w, h), вязкость (viscosity)
            - Влияние: при нахождении объекта внутри зоны скорость дополнительно затухает (vx и vy умножаются на viscosity)

    2.4. Управление и элементы интерфейса
        - Кнопки добавления: «Добавить круг», «Добавить блок», «Добавить треугольник», «Добавить пятиугольник», «Добавить магнит», «Добавить липкую зону»
        - Переключатель: «Гравитация» (вкл/выкл)
        - Кнопка: «Порыв ветра»
        - Переключатель режима магнита: «Притяжение» / «Отталкивание»
        - Кнопка: «Сброс»

3. Валидация и обработка ошибок
    3.1. Проверка взаимодействия
        - Игнорирование клика/перетаскивания, если объект не выбран
        - Ограничение координат при перетаскивании, чтобы объект не выходил за пределы Canvas

    3.2. Обработка пограничных случаев
        - Защита от деления на ноль при расчёте дистанций (например, если объект совпал с центром магнита)
        - Ограничение максимальных значений ускорений/скоростей, чтобы симуляция не “взрывалась”

4. Интерфейс
    4.1. Графический интерфейс
        - Основная область: Canvas с объектами и зонами
        - Панель управления: набор кнопок и переключателей справа

    4.2. Drag&Drop
        - Выбор объекта кликом по фигуре на Canvas
        - Перемещение фигуры при зажатой левой кнопке мыши
        - При отпускании: расчёт скорости мыши по последним позициям и выдача “импульса броска”

5. Требования к данным и параметрам
    5.1. Параметры симуляции
        - Частота обновления: около 60 FPS (через after)
        - Гравитация: добавляет ускорение вниз
        - Ветер: добавляет горизонтальную скорость при нажатии кнопки

    5.2. Параметры объектов
        - Масса влияет на воздействие сил (гравитация/магнит/ветер)
        - Упругость влияет на отскок при столкновениях и от границ
        - Затухание (drag) влияет на постепенную остановку движения

6. Ограничения
    - Столкновения полигонов рассчитываются упрощенно через bbox (без точной геометрии вершин)
    - Липкая зона создаётся кнопкой и размещается случайно, отдельного редактирования/перетаскивания липкой зоны не требуется
    - Магнит может перемещаться пользователем и/или двигаться по инерции; его кольцо радиуса действия всегда должно двигаться вместе с магнитом
